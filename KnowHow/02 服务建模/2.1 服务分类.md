---
typora-root-url: ..\..
---

在整个系统的构成过程中，可以使用大量的非常成熟的技术以及工具，在微服务架构中，这些都需要服务化。一般认为服务有工具服务，实体服务和业务服务。

#### 1. 工具服务

工具服务（Utility Service）代表可重用服务，区别于业务模型，作为应用程序与技术基础设施之间的交叉点，工具服务的特点是业务领域无关，本质是面向技术，具备高可重用性的底层处理服务。以Java语言为例，工具服务包括Java标准的api封装、公共功能区域、非功能性需求以及常见的开源框架的应用等四分维度。

![java工具服务](/KnowHow/images/02/java工具服务.png)

Java领域中存在很多开放、强大且常用的API，如与安全性相关的JCE（Java Cryptography Extension，Java密码扩展）提供用于加密、密钥生成和协商以及消息认证码（Message Authentication Code，MAC）算法的框架实现，JMS（Java Message Service，Java消息服务）提供面向消息中间件（Message Oriented Middleware，MOM）的API规范，JAX-RS（Java API for RESTful Web Service）则支持按照REST风格创建Web服务。这些API可以分别对应到公共功能区域的安全性、消息传递、http服务等各个领域，构成工具服务的一大类型。同时围绕系统的性能，可扩展性、可用性等因素，工具服务也包含了基于目前主流开源框架的封装需求，如使用Zookeeper实现分布式协调和分布式锁机制，使用Dubbo实现通用的RPC功能和服务治理，使用Redis等Nosql技术实现海量数据存储等，这些工具的应用都可以独立于业务并形成统一化、开放式服务。

#### 2. 实体服务

实体服务（Entity Service）建立一种一致的方法访问和处理业务数据，对应基于业务的功能上下文，侧重于以数据为中心。实体服务同样可重用，一般被更高级的任务服务使用。

![实体服务](/KnowHow/images/02/实体服务.png)

实体服务中包括领域实体（Domain Entity）和消息实体（Message Entity）两种实体。领域实体是指服务中规范化的业务数据模型，而消息实体特定于实体服务契约的数据模型。例如对于常见的用户（User）这个概念而言，领域实体可以包括账户、订单、和联系方式等信息。但是当实体服务暴露对外的接口时，可能并不一定需要所有的领域数据，消息实体作为领域实体的包装器和简单版本，就能成为一种灵活、与领域实体相互独立的数据传输和转换机制。

#### 3. 任务服务

任务服务（Task Service）关注实现业务相关逻辑，很大程度上由组合逻辑组成，通常需要维护状态。在任务服务中，确保使用实体服务限制返回数据量，服务调用者携带消费者信息和上下文，并由任务服务决定事务边界。

![任务服务](/KnowHow/images/02/任务服务.png)

以上三种服务化思想都可以用于构建微服务，工具服务因为不涉及业务，识别和提取相较于另外两种而言比较简单。实体服务关注于数据，任务服务关注于业务组合，都需要根据业务本身进行抽象化。